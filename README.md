# invoice
## 使用者情境

### 一、可註冊簡易個人資料供多人使用，登入後：
```
1. 有個人發票管理頁面：
  - 可以輸入發票資訊（期別、交易日期、字軌、發票號碼、金額、備註）
2. 有個人發票列表頁面：
  - 可以查詢、觀看所有輸入的發票資訊
  - 可編輯、刪除發票
3. 有對獎頁面：
  - 一鍵查詢當期的發票是否有中獎，按下後若有中獎會顯示：
　　　中獎的發票期別、字軌及發票號碼、金額、中獎類別、總中獎張數＆金額
  - 若沒有中獎，顯示沒有中獎
4.有個人資料管理頁面：
  - 可修改密碼、暱稱、生日、信箱
```
### 二、不登入
```
1. 有快速查詢頁面供查詢手上發票有無中獎

 - 先對後三碼，有中獎才跳出新頁面輸入完整碼數

 - 頁面下方顯示中獎發票資訊，及時統計中獎類別、張數、金額及總金額

```
### 三、共同頁面
```
 可以輸入當期統一發票中獎號碼
```


## 頁面製作

### 1. 首頁(index.php) - 登入頁面
- 標題為「統一發票對獎系統 - 首頁」
- 有登入頁面、註冊連結、忘記密碼連結
- 可連結至快速查詢頁面，不須登入即可對獎
   
   →透過checklogin.php驗證帳密是否錯誤，如果錯誤顯示帳密錯誤重新輸入，如果正確即連結到發票管理頁面
　

### 2. 註冊頁面(reg.php)

- 標題為「統一發票對獎系統 - 註冊帳號」
- 可填入欄位：帳號、密碼、暱稱、信箱、生日 

  → 透過adduser.php寫入資訊到資料庫

### 3. 忘記密碼(forget.html)
- 標題為「統一發票對獎系統 - 重設密碼」
- 可填入欄位：帳號、生日、信箱
  
   -> 驗證資料後連結至 4.重設密碼

### 4. 重設密碼(resetpw.php)
- 標題為「統一發票對獎系統 - 重設密碼」
- 可填入欄位：重設密碼、再次輸入密碼後更新至資料庫
  
   -> 透過update_user.php更新

### 5. 發票管理頁面(main.php)
- 標題為「統一發票對獎系統 - 發票管理」
- 沒有登入則導向登入頁面
- 設4連結(輸入發票、發票列表、發票對獎、變更個人資訊)


### 6. 輸入發票頁面(invoice.php)
- 標題為「統一發票對獎系統 - 發票管理->輸入發票」
- 沒有登入則導向登入頁面
- 可填入欄位：年度、發票期別、交易日期、字軌、號碼、金額、備註   
- 送出後可繼續填入下一筆資料

### 7. 發票列表頁面(list.php)
- 標題為「統一發票對獎系統 - 發票管理->發票列表」
- 沒有登入則導向登入頁面
- 可選擇年度、期數查詢輸入的發票資料
- 顯示除了id、帳號之外的所有欄位
- 可編輯發票資訊(年度、發票期別、交易日期、字軌、號碼、金額、備註)，並寫入新的更新時間
  　→透過update_invoice.php更新
- 可刪除發票資訊

### 8. 共同頁面－輸入對獎號碼頁面(winning_numbers.php)

- 可輸入當期統一發票對獎號碼，寫入資料庫，供以後再來對獎使用(只要輸入一次)

### 9. 對獎頁面(award.php)

有登入－
- 選擇年度、期數顯示統一發票對獎號碼及對應中獎金額（預設當期）
- 有一鍵對獎按鈕，按下後下方顯示中獎的發票號碼列表（發票號碼、發票金額以及中獎類別及金額）
  ，在列表下方統計共Ｘ張中獎，金額ｘｘｘ元
- 如果沒有中獎則顯示沒有發票中獎

沒有登入－　快速對獎
- 選擇年度、期數顯示統一發票對獎號碼及對應中獎金額（預設當期）
- 輸入發票後三碼對獎，沒有中獎則下方顯示沒有中獎，若有中獎則進一步要求輸入發票完整號碼
  比對後，下方顯示中獎類別及中獎金額
- 送出後清空輸入格方便輸入下一張發票資訊

### 10.個人資料管理頁面(idv.php)

- 可修改密碼、暱稱、信箱、生日



## 資料庫製作

- 資料庫名稱：invoice

- 資料表名稱：

   - user：

     設id(id)、帳號(acc)、密碼(pw)、暱稱(name)、信箱(email)、生日(bir)、註冊時間(create_time)、更新時間(create_time)

   - invoice：

     設id(id)、帳號(acc)、年度(year)、發票期別(period)、交易日期(date)可空、字軌(code)、號碼(num)、發票金額(spend)可空、備註(note)可空、建立時間(create_time)、更新時間(update_time)
   
   - winning numbers:
  
    設id、年度(year)、期別(period)、特別獎(special)、特獎(top)、頭獎(first_prize1)、頭獎2(first_prize2)、頭獎三(first_prize3)、增開六獎(addprize)




# invoice 開發紀錄

### 2020 5/30
1.刪除發票資料OK
2.一鍵比對所有發票OK
3.發票列表分頁功能OK

### 2020 5/12
1.新增中獎號碼功能OK

2.更新中獎號碼功能OK

### 2020 5/11
統一發票中獎號碼頁面開始製作

### 2020 5/10
1.註冊及登入功能OK

2.登入後發票管理頁面讀得到使用者暱稱

### 2020 5/9 
　撰寫異想天開開發文件

### 2020 5/8
1.建立網頁基本架構

2.發票輸入頁面+新增紀錄功能完成
